// Generated by CoffeeScript 1.10.0
(function() {
  var Permission, Role;

  Permission = require('./permission');

  Role = (function() {
    function Role(name1) {
      this.name = name1;
      this.permissions = {};
    }

    Role.prototype.getName = function() {
      return this.name;
    };

    Role.prototype.addPermission = function(name, methods) {
      if (!Array.isArray(methods)) {
        methods = [methods];
      }
      this.permissions[name] = Permission(name, methods);
      return this;
    };

    Role.prototype.isAllowed = function(name, method) {
      if (!(this.permissions.hasOwnProperty(name))) {
        if (this.permissions.hasOwnProperty('*')) {
          return Permission.hasAccess(this.permissions['*'], method);
        } else {
          return false;
        }
      } else {
        return Permission.hasAccess(this.permissions[name], method);
      }
    };

    return Role;

  })();

  module.exports = function(name) {
    return new Role(name);
  };

}).call(this);
